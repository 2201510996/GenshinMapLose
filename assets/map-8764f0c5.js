import{G as K,_ as Q,O,X as re,P as se,A as f,q as N,B as ce,bC as X,as as G,T as x,a5 as Y,a4 as U,ai as ue,ab as c,W as T,y as b,a7 as D,at as me,au as ve,v as de,U as M,$ as V,a0 as oe,p as fe,H as j,w as q,Z as pe,a1 as F,I as he,Q as ae,s as le,Y as ge,V as _e,a6 as ye,aa as be,ae as J,ak as we,af as Se,bg as ze,bj as xe,bi as ke,a9 as ee,aW as Ee,bo as Ce,bp as Le}from"./index-3613264c.js";class Pe extends Error{constructor(u){super(u),this.name="ElementPlusError"}}function Me(m,u){throw new Pe(`[${m}] ${u}`)}function dt(m,u){}const $=4,Te={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Re=({move:m,size:u,bar:n})=>({[n.size]:u,transform:`translate${n.axis}(${m}%)`}),ne=Symbol("scrollbarContextKey"),He=K({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Be="Thumb",$e=O({__name:"thumb",props:He,setup(m){const u=m,n=re(ne),l=se("scrollbar");n||Me(Be,"can not inject scrollbar context");const i=f(),_=f(),r=f({}),h=f(!1);let t=!1,E=!1,S=de?document.onselectstart:null;const s=N(()=>Te[u.vertical?"vertical":"horizontal"]),y=N(()=>Re({size:u.size,move:u.move,bar:s.value})),P=N(()=>i.value[s.value.offset]**2/n.wrapElement[s.value.scrollSize]/u.ratio/_.value[s.value.offset]),C=o=>{var e;if(o.stopPropagation(),o.ctrlKey||[1,2].includes(o.button))return;(e=window.getSelection())==null||e.removeAllRanges(),R(o);const a=o.currentTarget;a&&(r.value[s.value.axis]=a[s.value.offset]-(o[s.value.client]-a.getBoundingClientRect()[s.value.direction]))},p=o=>{if(!_.value||!i.value||!n.wrapElement)return;const e=Math.abs(o.target.getBoundingClientRect()[s.value.direction]-o[s.value.client]),a=_.value[s.value.offset]/2,z=(e-a)*100*P.value/i.value[s.value.offset];n.wrapElement[s.value.scroll]=z*n.wrapElement[s.value.scrollSize]/100},R=o=>{o.stopImmediatePropagation(),t=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",k),S=document.onselectstart,document.onselectstart=()=>!1},g=o=>{if(!i.value||!_.value||t===!1)return;const e=r.value[s.value.axis];if(!e)return;const a=(i.value.getBoundingClientRect()[s.value.direction]-o[s.value.client])*-1,z=_.value[s.value.offset]-e,w=(a-z)*100*P.value/i.value[s.value.offset];n.wrapElement[s.value.scroll]=w*n.wrapElement[s.value.scrollSize]/100},k=()=>{t=!1,r.value[s.value.axis]=0,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",k),d(),E&&(h.value=!1)},Z=()=>{E=!1,h.value=!!u.size},v=()=>{E=!0,h.value=t};ce(()=>{d(),document.removeEventListener("mouseup",k)});const d=()=>{document.onselectstart!==S&&(document.onselectstart=S)};return X(G(n,"scrollbarElement"),"mousemove",Z),X(G(n,"scrollbarElement"),"mouseleave",v),(o,e)=>(x(),Y(ve,{name:b(l).b("fade"),persisted:""},{default:U(()=>[ue(c("div",{ref_key:"instance",ref:i,class:T([b(l).e("bar"),b(l).is(b(s).key)]),onMousedown:p},[c("div",{ref_key:"thumb",ref:_,class:T(b(l).e("thumb")),style:D(b(y)),onMousedown:C},null,38)],34),[[me,o.always||h.value]])]),_:1},8,["name"]))}});var te=Q($e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Ne=K({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),je=O({__name:"bar",props:Ne,setup(m,{expose:u}){const n=m,l=f(0),i=f(0);return u({handleScroll:r=>{if(r){const h=r.offsetHeight-$,t=r.offsetWidth-$;i.value=r.scrollTop*100/h*n.ratioY,l.value=r.scrollLeft*100/t*n.ratioX}}}),(r,h)=>(x(),M(oe,null,[V(te,{move:l.value,ratio:r.ratioX,size:r.width,always:r.always},null,8,["move","ratio","size","always"]),V(te,{move:i.value,ratio:r.ratioY,size:r.height,vertical:"",always:r.always},null,8,["move","ratio","size","always"])],64))}});var Ze=Q(je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ie=K({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:fe([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),We={scroll:({scrollTop:m,scrollLeft:u})=>[m,u].every(j)},Oe="ElScrollbar",Ae=O({name:Oe}),Xe=O({...Ae,props:Ie,emits:We,setup(m,{expose:u,emit:n}){const l=m,i=se("scrollbar");let _,r;const h=f(),t=f(),E=f(),S=f("0"),s=f("0"),y=f(),P=f(1),C=f(1),p=N(()=>{const e={};return l.height&&(e.height=J(l.height)),l.maxHeight&&(e.maxHeight=J(l.maxHeight)),[l.wrapStyle,e]}),R=N(()=>[l.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!l.native}]),g=N(()=>[i.e("view"),l.viewClass]),k=()=>{var e;t.value&&((e=y.value)==null||e.handleScroll(t.value),n("scroll",{scrollTop:t.value.scrollTop,scrollLeft:t.value.scrollLeft}))};function Z(e,a){we(e)?t.value.scrollTo(e):j(e)&&j(a)&&t.value.scrollTo(e,a)}const v=e=>{j(e)&&(t.value.scrollTop=e)},d=e=>{j(e)&&(t.value.scrollLeft=e)},o=()=>{if(!t.value)return;const e=t.value.offsetHeight-$,a=t.value.offsetWidth-$,z=e**2/t.value.scrollHeight,w=a**2/t.value.scrollWidth,I=Math.max(z,l.minSize),W=Math.max(w,l.minSize);P.value=z/(e-z)/(I/(e-I)),C.value=w/(a-w)/(W/(a-W)),s.value=I+$<e?`${I}px`:"",S.value=W+$<a?`${W}px`:""};return q(()=>l.noresize,e=>{e?(_==null||_(),r==null||r()):({stop:_}=pe(E,o),r=X("resize",o))},{immediate:!0}),q(()=>[l.maxHeight,l.height],()=>{l.native||F(()=>{var e;o(),t.value&&((e=y.value)==null||e.handleScroll(t.value))})}),he(ne,ae({scrollbarElement:h,wrapElement:t})),le(()=>{l.native||F(()=>{o()})}),ge(()=>o()),u({wrapRef:t,update:o,scrollTo:Z,setScrollTop:v,setScrollLeft:d,handleScroll:k}),(e,a)=>(x(),M("div",{ref_key:"scrollbarRef",ref:h,class:T(b(i).b())},[c("div",{ref_key:"wrapRef",ref:t,class:T(b(R)),style:D(b(p)),onScroll:k},[(x(),Y(ye(e.tag),{ref_key:"resizeRef",ref:E,class:T(b(g)),style:D(e.viewStyle)},{default:U(()=>[_e(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?be("v-if",!0):(x(),Y(Ze,{key:0,ref_key:"barRef",ref:y,height:s.value,width:S.value,always:e.always,"ratio-x":C.value,"ratio-y":P.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Ye=Q(Xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const De=Se(Ye);const ie="/map-images/arrow.png",Ve="/map-images/map_icon.png";const A=m=>(Ce("data-v-80bb30fd"),m=m(),Le(),m),qe={class:"map_control"},Ke={key:0,class:"open"},Qe={class:"head"},Ue={class:"img"},Ge=["src"],Fe={class:"title"},Je={class:"open_content"},et=["onClick"],tt={class:"img"},st=["src"],ot=["src"],at={class:"title"},lt=A(()=>c("div",{class:"arrow_bg"},[c("img",{src:ie,alt:""})],-1)),nt=[lt],it=A(()=>c("div",{class:"map_icon"},[c("img",{src:Ve,alt:""})],-1)),rt=A(()=>c("div",{class:"arrow_bg"},[c("img",{src:ie,alt:""})],-1)),ct=[it,rt],ut=A(()=>c("div",{id:"map"},null,-1)),H=2,B=7,mt={__name:"map",props:{mini:{type:Boolean,default:!1},marker:{type:Boolean,default:!1},showQuery:{type:Boolean,default:!1}},setup(m,{expose:u}){const n=m,i=[14500,13e3],{currentRoute:_,replace:r}=xe(),{query:h}=ke(),t=ae([{title:"提瓦特大陆",tiles:"tiles_tivat",img:"tiwate.png",name:"tiwate",imgSize:i,minZoom:H,maxZoom:B},{title:"枫丹",tiles:"tiles_tivat",img:"fd.png",name:"fd",centerPosi:[3434,1578],imgSize:i,minZoom:H,maxZoom:B},{title:"蒙德",tiles:"tiles_tivat",img:"md.png",name:"md",centerPosi:[8821,2851],imgSize:i,minZoom:H,maxZoom:B},{title:"璃月",tiles:"tiles_tivat",img:"ly.png",name:"ly",centerPosi:[7634,5716],imgSize:i,minZoom:H,maxZoom:B},{title:"稻妻",tiles:"tiles_tivat",img:"dq.png",name:"dq",centerPosi:[12413,8215],imgSize:i,minZoom:H,maxZoom:B},{title:"须弥",tiles:"tiles_tivat",img:"xm.png",name:"xm",centerPosi:[5192,5518],imgSize:i,minZoom:H,maxZoom:B},{title:"渊下宫",tiles:"tiles_yxg",img:"yxg.png",name:"yxg",imgSize:[3277,3277],minZoom:2,maxZoom:5},{title:"层岩巨渊·地下矿区",tiles:"tiles_cyjy",img:"cyjy.png",name:"cyjy",imgSize:[4096,4096],minZoom:3,maxZoom:5},{title:"琉形蜃境",tiles:"tiles_lxsj",img:"lxsj.png",name:"lxsj",imgSize:[7900,7900],minZoom:2,maxZoom:6}]),E=()=>{if(n.showQuery&&h!=null&&h.tab){const v=t.findIndex(d=>d.name==h.tab);if(v!=-1)return f(v)}return f(0)},S=f(!1);let s=f(null);const y=E();q(y,v=>{n.showQuery&&r({query:{..._.value.query,tab:t.find((d,o)=>o==v).name}})});const P=(v,d)=>{y.value=d,S.value=!1,k()};le(()=>{k()});let C,p,R,g;function k(){s.value=null;const v=t[y.value],d=v.imgSize,o=v.minZoom,e=v.maxZoom;if(!p){p=L.map("map",{crs:L.CRS.Simple,zoomControl:!1,zoomSnap:.5});let a=null;p.on("click",function(z){const w=g.project(z.latlng);console.log("["+Math.floor(w.x)+","+Math.floor(w.y)+"]"),n.marker&&(a?a.setLatLng(g.unproject(w)):a=L.marker(g.unproject(w)).addTo(p),s.value={x:Math.floor(w.x),y:Math.floor(w.y)})})}if(p.setMinZoom(o),p.setMaxZoom(e),g=new L.RasterCoords(p,d),v.centerPosi?p.setView(g.unproject(v.centerPosi),e-1):p.setView(g.unproject([d[0]/2,d[1]/2]),o),R!=v.tiles){C&&p.removeLayer(C);const a="https://jsd.cdn.zzko.cn/gh/2201510996/GenshinMapLose@static/";console.log(),C=L.tileLayer(`${a}${v.tiles}/{z}/{x}/{y}.png`,{noWrap:!0,minZoom:o,bounds:g.getMaxBounds(),maxNativeZoom:g.zoomLevel()}).addTo(p),R=v.tiles}}return u({propCoords:s,activeIndex:y,mapModule:t,getMap:()=>({rc:g,map:p})}),(v,d)=>{const o=De;return x(),M("div",{class:T([{mini:!!n.mini},"content"])},[c("div",qe,[S.value?(x(),M("div",Ke,[c("div",Qe,[c("div",Ue,[c("img",{src:`/map-images/map-img-head/${t[b(y)].img}`,alt:""},null,8,Ge)]),c("div",Fe,ee(t[b(y)].title),1)]),V(o,{height:n.mini?"350px":null},{default:U(()=>[c("div",Je,[(x(!0),M(oe,null,Ee(t,(e,a)=>(x(),M("div",{class:T(["item",b(y)==a?"active":""]),key:a,onClick:z=>P(e,a)},[c("div",tt,[c("img",{class:"info",src:`/map-images/map-img-list/${e.img}`,alt:""},null,8,st),c("img",{class:"active",src:`/map-images/map-img-active/${e.img}`,alt:""},null,8,ot)]),c("div",at,ee(e.title),1)],10,et))),128))])]),_:1},8,["height"]),c("div",{class:"on_open",onClick:d[0]||(d[0]=e=>S.value=!1)},nt)])):(x(),M("div",{key:1,class:"no_open",onClick:d[1]||(d[1]=e=>S.value=!0)},ct))]),ut],2)}}},ft=ze(mt,[["__scopeId","data-v-80bb30fd"]]);export{De as E,dt as d,ft as m,Me as t};
